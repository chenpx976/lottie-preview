(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{XAOp:function(e,t,a){"use strict";var l=a("3rQ3"),i=a("xK3H");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Lzml");var o=i(a("vpm+"));a("RisG");var n=i(a("x1LY"));a("1pPU");var r=i(a("KjZ1")),s=i(a("fh3l")),c=i(a("Lnrk")),d=l(a("6cB7")),u=i(a("YTT5")),m=i(a("A2Oa")),f=i(a("HlVd"));a("lgQB");class p extends d.Component{constructor(e){super(e),this.updateCurrentTime=(()=>{this.setState((0,f.default)(this.state,{currentTime:{$set:this.currentTime}}))}),this.handleSliderChange=(e=>{this.state.lottieConfig.play?this.lottieView.goToAndPlay(e,!0):this.lottieView.goToAndStop(e,!0)}),this.toggle=(()=>{this.setState((0,f.default)(this.state,{lottieConfig:{$toggle:["play"]}}))}),this.stop=(()=>{this.setState((0,f.default)(this.state,{lottieConfig:{play:{$set:!1}}}))}),this.handleLoop=(()=>{this.setState((0,f.default)(this.state,{lottieConfig:{$toggle:["loop"]}}))}),this.lottieView={},this.currentTime=0,this.timerCurentTime=0,this.state={lottieFile:null,currentTime:0,lottieConfig:{play:!1,loop:!0,totalFrames:0,frameRate:0}}}componentDidMount(){var e=this;return(0,c.default)(s.default.mark(function t(){var a,l;return s.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("did"),a=e.props.location.query.url,a){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,fetch(decodeURIComponent(a)).then(e=>e.json());case 6:l=t.sent,e.lottieView=m.default.loadAnimation({container:e.el,renderer:"svg",loop:!0,autoplay:!0,animationData:JSON.parse(JSON.stringify(l)),rendererSettings:{scaleMode:"scale",clearCanvas:!0,progressiveLoad:!0,hideOnTransparent:!1}}),e.lottieView.addEventListener("enterFrame",t=>{e.currentTime=Number.parseInt(t.currentTime,10)}),e.timerCurentTime=setInterval(e.updateCurrentTime,1e3/e.lottieView.frameRate||25),e.setState({lottieConfig:{play:!0,loop:!0,totalFrames:e.lottieView.totalFrames,frameRate:e.lottieView.frameRate}});case 11:case"end":return t.stop()}},t,this)}))()}render(){var e=this.state,t=e.currentTime,a=void 0===t?0:t,l=e.lottieConfig,i=l.totalFrames,s=void 0===i?0:i,c=l.play,m=void 0!==c&&c,f=l.loop;return d.default.createElement("div",{className:"preview"},d.default.createElement("div",{className:"header"},d.default.createElement("div",{className:"icon-close"},d.default.createElement(u.default,{to:"/"},d.default.createElement(r.default,{type:"close"}))),d.default.createElement("div",{className:"icon-fullscreen"},d.default.createElement(r.default,{type:"eye"}))),d.default.createElement("div",{className:"lottie-body"},d.default.createElement("div",{ref:e=>{this.el=e},className:"lottie-container"})),d.default.createElement("div",{className:"lottie-controller"},d.default.createElement("div",{className:"action-panel"},d.default.createElement("div",{className:"action-bar"},d.default.createElement("div",{className:"action-play"},d.default.createElement(r.default,{type:m?"pause-circle":"play-circle",onClick:this.toggle}),d.default.createElement("span",null,a," / ",s)),d.default.createElement(n.default,{className:"play-slider",min:0,max:s,onChange:this.handleSliderChange,value:a}),d.default.createElement("div",{className:"action-loop",onClick:this.handleLoop},d.default.createElement(r.default,{type:"retweet",style:{color:`${f?"#484848":"#eee"}`}})))),d.default.createElement("div",{className:"action-btn"},d.default.createElement(o.default,{className:"action"},"border"),d.default.createElement(o.default,{className:"action"},"background"),d.default.createElement(o.default,{className:"action"},"Trim"),d.default.createElement(o.default,{className:"action"},"Scale"),d.default.createElement(o.default,{className:"action"},"Speed"),d.default.createElement(o.default,{className:"action"},"ShowKeyPaths"),d.default.createElement(o.default,{className:"action"},"RenderGraph"),d.default.createElement(o.default,{className:"action"},"Lint"))))}componentDidUpdate(e,t,a){var l=this.state.lottieConfig;if(l!==t.lottieConfig){if(l.play)this.lottieView.play();else{var i=Math.round(this.lottieView.currentRawFrame);this.lottieView.pause(),this.lottieView.setCurrentRawFrameValue(i)}console.log("lottieConfig.loop",l.loop),l.loop?this.lottieView.onLoopComplete=(()=>{}):this.lottieView.onLoopComplete=this.stop}}componentWillUnmount(){console.log("unmound"),clearInterval(this.timerCurentTime),this.lottieView.destroy&&this.lottieView.destroy()}}var h=p;t.default=h},lgQB:function(e,t,a){}}]);